<!-- NEW top bar -->
<div class="container" id="common-top">
  <div class="row">
    <%= link_to root_path, class: "top-back" do %>
      <i class="fas fa-chevron-left"></i>
    <% end %>
    <h1>ORDER</h1>
  </div>
</div>

<div class="hello">
  <div class="container result-container">
    <% @orders.each do |order| %>
      <div class="row each-food">
        <!-- img -->
        <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 pic-column">
          <div class="food-img-div"><%= cl_image_tag(@results_with_data[order][0]) %></div>
        </div>
        <!-- desc -->
        <div class="col-xs-6 col-sm-6 col-md-8 col-lg-8">
          <dl class="food-description">
            <dt><%= @food_title %></dt>
            <dd><%= @food_summary %></dd>
          </dl>
          <!-- quantity -->
          <div class="quantity">
            <button class="decrease" type="button" title="Decrease Quantity"><i class="fas fa-minus-circle"></i></button>
            <input type="text" class="quantity-amount" name="" value="1" />
            <button class="increase" type="button" title="Increase Quantity"><i class="fas fa-plus-circle"></i></button>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
<script>
  let value,
  quantity = document.getElementsByClassName('quantity');

  function createBindings(quantityContainer) {
    let quantityAmount = quantityContainer.getElementsByClassName('quantity-amount')[0];
    let increase = quantityContainer.getElementsByClassName('increase')[0];
    let decrease = quantityContainer.getElementsByClassName('decrease')[0];
    increase.addEventListener('click', function () { increaseValue(quantityAmount); });
    decrease.addEventListener('click', function () { decreaseValue(quantityAmount); });
  }
  function init() {
      for (let i = 0; i < quantity.length; i++ ) {
        createBindings(quantity[i]);
      }
  };
  function increaseValue(quantityAmount) {
      value = parseInt(quantityAmount.value, 10);

      // console.log(quantityAmount, quantityAmount.value);

      value = isNaN(value) ? 0 : value;
      value++;
      quantityAmount.value = value;
  }
  function decreaseValue(quantityAmount) {
      value = parseInt(quantityAmount.value, 10);

      value = isNaN(value) ? 0 : value;
      if (value > 0) value--;

      quantityAmount.value = value;
  }
  init();
</script>

<!-- NEW footer -->
<div class="container" id="common-bottom">
  <div class="row">
    <!-- camera -->
    <%= link_to root_path, class: "bottom-icon" do %>
      <i class="fas fa-camera"></i>
    <% end %>
    <!-- heart -->
    <%= link_to root_path, class: "bottom-icon" do %>
      <i class="fas fa-heart"></i>
    <% end %>
    <!-- bag -->
    <%= link_to root_path, class: "bottom-icon" do %>
      <i class="fas fa-shopping-bag"></i>
      <!-- if cart is empty add 'empty' class -->
      <span class="cart-num empty"></span>
      <!-- <span class="cart-num">3</span> -->
    <% end %>
    <!-- clock -->
    <%= link_to root_path, class: "bottom-icon" do %>
      <i class="fas fa-clock"></i>
    <% end %>
    <!-- user -->
    <%= link_to root_path, class: "bottom-icon" do %>
      <i class="fas fa-user-circle"></i>
    <% end %>
  </div>
</div>
